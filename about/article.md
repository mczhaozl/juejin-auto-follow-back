# GitHub Actions 真香！我用它解决了所有定时任务烦恼

## 前言：一篇文章引发的思考

前段时间刷掘金，看到一篇文章[《🎉 几行代码实现掘金自动签到+微信推送 再也不怕漏签了》](https://juejin.cn/post/7021027165294559245)，作者用 GitHub Actions 实现了自动签到，每天早上还能收到微信推送。

看完之后我突然意识到：**GitHub Actions 不就是现成的免费定时任务平台吗？**

作为一名程序员，我每天都要处理各种定时任务：

- **公司项目**：数据爬取、报表生成、自动备份
- **个人项目**：各种平台签到、数据监控、定时提醒
- **日常琐事**：健康检查、价格监控、内容聚合

这些任务就像一个个小闹钟，时不时就要响一下。

最让我头疼的是执行环境的问题：

- **自己电脑**：领导总说要熄屏省电，下班了还得关机。第二天来了，发现昨晚的任务根本没跑……
- **公司服务器**：资源紧张，申请个定时任务还要走流程。而且跑个人项目总感觉不太合适
- **云服务器**：最稳定，但要花钱啊！一个月几十块，跑个小任务有点浪费

看完那篇签到文章后，我开始尝试用 GitHub Actions 做各种自动化任务。结果发现，这玩意儿真香！

## 我的 GitHub Actions 实践之路

### 第一步：自动签到

受那篇文章启发，我先实现了掘金自动签到。每天早上 8 点自动签到领矿石，再也不用担心漏签了。

### 第二步：数据监控

有了第一次成功经验，我开始尝试更多场景：
- 监控商品价格，降价自动通知
- 检查服务器健康状态
- 定时备份重要数据

### 第三步：社交自动化

在掘金写文章后，经常有朋友关注我。按照社交礼仪，应该回关表示感谢。但每次都要手动操作，有时候忙起来就忘了……

作为程序员，怎么能容忍这种重复劳动？于是我想：**能不能也用 GitHub Actions 来处理这个问题？**

经过一番研究，我发现完全可行！而且实现起来并不复杂。

## GitHub Actions 为什么这么香？

### 1. 完全免费
- 公共仓库：不限时长
- 私有仓库：每月 2000 分钟（足够用了）
- 我现在跑了好几个定时任务，每月才用 400 分钟

### 2. 稳定可靠
- GitHub 的基础设施，比自己的电脑靠谱多了
- 不用担心断电、断网、重启
- 24/7 运行，从不掉线

### 3. 配置简单
- 一个 YAML 文件搞定
- 不需要额外的服务器
- 不需要复杂的运维知识

### 4. 安全性高
- GitHub Secrets 加密存储敏感信息
- 日志自动屏蔽密钥
- 即使仓库公开，密钥也不会泄露

## 通用实现思路

不管是签到、回关还是其他自动化任务，实现思路都是类似的：

### 第一步：分析需求

以社交平台的自动化为例，我们需要：
1. 获取需要处理的数据（比如新粉丝列表）
2. 判断是否需要操作（比如是否已经关注）
3. 执行相应操作（比如回关）
4. 记录执行日志

### 第二步：编写脚本

核心逻辑框架：

```python
class AutomationBot:
    def __init__(self, credentials):
        # 初始化：设置认证信息、请求头等
        pass
    
    def get_data(self):
        # 获取需要处理的数据
        pass
    
    def process_item(self, item):
        # 处理单个数据项
        pass
    
    def run(self):
        # 主流程：获取数据 → 遍历处理 → 记录日志
        data = self.get_data()
        for item in data:
            self.process_item(item)
            time.sleep(2)  # 避免操作过快
```

关键点：
- 添加延时，避免触发风控
- 异常处理，保证脚本稳定性
- 记录日志，方便查看运行情况

### 第三步：配置 GitHub Actions

创建 `.github/workflows/automation.yml`：

```yaml
name: 自动化任务

on:
  schedule:
    - cron: '0 * * * *'  # 定时执行
  workflow_dispatch:  # 允许手动触发

jobs:
  automation:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout 代码
        uses: actions/checkout@v4

      - name: 设置 Python 环境
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: 安装依赖
        run: pip install requests

      - name: 执行脚本
        run: python scripts/automation.py
        env:
          CREDENTIALS: ${{ secrets.CREDENTIALS }}
```

### 第四步：配置密钥

敏感信息（如 Cookie、Token）存储在 GitHub Secrets：
1. 仓库 Settings → Secrets → New secret
2. 添加密钥名称和值
3. 在脚本中通过环境变量读取

## 我的实践成果

用 GitHub Actions 几个月下来，我已经实现了：

### 1. 每日签到系列
- 掘金签到：每天早上 8 点，自动领矿石
- 其他平台签到：再也不用担心漏签

### 2. 社交自动化
- 自动回关：有人关注我，一小时内自动回关
- 消息提醒：重要互动及时通知

### 3. 数据监控
- 价格监控：商品降价自动通知
- 服务监控：网站挂了立即提醒

### 4. 定时备份
- 数据库备份：每天自动备份到云盘
- 文件同步：重要文件定时同步

所有这些任务，都在 GitHub 上稳定运行，完全不用操心！

## 进阶技巧

### 1. 调整执行频率

根据实际需求调整 cron 表达式：

```yaml
# 每2小时执行一次
- cron: '0 */2 * * *'

# 每天早上9点和晚上6点执行
- cron: '0 9,18 * * *'

# 每周一早上9点执行
- cron: '0 1 * * 1'
```

### 2. 添加通知功能

可以集成企业微信、钉钉、PushPlus 等通知服务：

```python
def send_notification(message):
    webhook_url = os.getenv('WEBHOOK_URL')
    requests.post(webhook_url, json={
        'msgtype': 'text',
        'text': {'content': message}
    })
```

### 3. 错误重试机制

添加重试逻辑，提高脚本稳定性：

```python
def retry_on_failure(func, max_retries=3):
    for i in range(max_retries):
        try:
            return func()
        except Exception as e:
            if i == max_retries - 1:
                raise e
            time.sleep(5)
```

### 4. 数据统计

记录执行历史，生成统计报告：

```python
def save_log(data):
    log_file = Path(f"logs/{datetime.now().strftime('%Y-%m')}.json")
    logs = []
    if log_file.exists():
        with open(log_file) as f:
            logs = json.load(f)
    logs.append(data)
    with open(log_file, 'w') as f:
        json.dump(logs, f, indent=2)
```

## 成本分析

让我们算一笔账，看看 GitHub Actions 到底有多划算：

**我的使用情况**：
- 签到任务：每天 1 次，每次 20 秒
- 社交自动化：每小时 1 次，每次 30 秒
- 数据监控：每 2 小时 1 次，每次 15 秒

**每月总耗时**：
- 签到：30 天 × 20 秒 = 10 分钟
- 社交：30 天 × 24 次 × 30 秒 = 360 分钟
- 监控：30 天 × 12 次 × 15 秒 = 90 分钟
- **合计：约 460 分钟**

GitHub 免费账户每月 2000 分钟，我只用了 460 分钟，还剩 1540 分钟可以跑其他任务。

**如果用云服务器**：
- 最便宜的云服务器：约 50 元/月
- GitHub Actions：0 元/月

**完全免费，零成本！**

## 举一反三：更多应用场景

掌握了这个技巧，你可以用 GitHub Actions 做很多事情。我现在已经用它实现了：

### 1. 自动签到系列
- **掘金签到**：每天早上 8 点自动签到，领矿石
- **CSDN 签到**：自动签到领积分
- **GitHub 打卡**：保持 Contributions 绿色

### 2. 数据监控系列
- **价格监控**：定时爬取商品价格，降价自动通知
- **库存监控**：抢购商品有货立即提醒
- **网站监控**：定时检查网站是否正常

### 3. 自动化运维
- **定时备份**：自动备份数据库、文件到云盘
- **健康检查**：定时 ping 服务器，挂了立即通知
- **日志清理**：定期清理过期日志文件

### 4. 内容聚合
- **RSS 订阅**：定时抓取博客更新，生成 RSS 源
- **热榜聚合**：每天汇总各大平台热榜，发送到邮箱
- **文章推送**：关注的作者发新文章，自动推送

只要是定时任务，都可以用 GitHub Actions 来做！而且完全免费，稳定可靠。

## 总结与思考

从最初看到别人的签到脚本受到启发，到现在用 GitHub Actions 实现了各种自动化任务，我深刻体会到：

**作为程序员，我们的目标就是：能自动化的绝不手动，能偷懒的绝不勤快！**

GitHub Actions 的优势：
- ✅ **零成本**：完全免费
- ✅ **零维护**：设置好就不用管了
- ✅ **高可用**：GitHub 的基础设施，稳定可靠
- ✅ **易扩展**：可以轻松添加更多功能

现在我的各种定时任务都跑在 GitHub 上：
- 电脑关机也不怕
- 服务器也不用买
- 省心又省钱

希望这篇文章能给你带来启发。如果你也有类似的定时任务需求，不妨试试 GitHub Actions，说不定会打开新世界的大门！

## 一些建议

如果你也想尝试类似的自动化：

1. **从简单开始**：先实现一个签到脚本，熟悉 GitHub Actions 的基本用法
2. **注意频率**：不要设置过高的执行频率，避免给平台造成压力
3. **尊重规则**：自动化是为了提高效率，不是为了钻空子
4. **保护隐私**：敏感信息一定要用 GitHub Secrets 存储

## 写在最后

最近我在掘金上写文章，经常收到朋友们的关注。为了表示感谢，我都会回关。

不过有时候工作忙起来，可能会忘记及时回关。所以我也用 GitHub Actions 做了个小工具，**每小时自动检查一次**，确保不会漏掉任何一位朋友。

如果你关注了我，最多一小时就能收到回关。不信的话，可以试试看 �

---

**参考文章**：
- [🎉 几行代码实现掘金自动签到+微信推送 再也不怕漏签了](https://juejin.cn/post/7021027165294559245) - 感谢 @Bi8bo 的文章给我的启发！

**相关资源**：
- [GitHub Actions 官方文档](https://docs.github.com/en/actions)
- [Cron 表达式生成器](https://crontab.guru/)

如果这篇文章对你有帮助，欢迎点赞、收藏、关注三连！有任何问题也欢迎在评论区交流 🎉
